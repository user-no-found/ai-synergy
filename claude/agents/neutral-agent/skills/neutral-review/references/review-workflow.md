# 中立评估工作流（neutral-review）

## 0) 定位与读取

1) 确认项目根目录
   - 默认项目根目录=当前会话所在目录
   - 不确定时必须先用 AskUserQuestion 询问确认

2) 定位草案文件
   - 目标文件：`Record/plan/draft-plan.md`
   - 如果不存在：用 AskUserQuestion 确认路径

3) 读取策略
   - 必须读取：草案原文、"Claude复审补充"、"Codex修订意见"
   - 可选读取："Claude确认意见"（如有）
   - 对照读取：了解两方的完整立场

## 1) 识别共识与分歧

### 1.1 共识点识别
- 两方都认可的技术决策
- 两方都认可的风险评估
- 两方都认可的实现方案

### 1.2 分歧点识别
- 技术方案选择分歧（如数据库、框架选择）
- 风险评估分歧（如某方案是否有安全风险）
- 优先级分歧（如先做A还是先做B）
- 范围分歧（如是否需要某功能）

## 2) 独立技术评估

对每个分歧点，neutral-agent 必须：

### 2.1 理解两方立场
- plan-agent 的立场和理由
- analysis-agent 的立场和理由
- 两方是否有遗漏的考量

### 2.2 独立分析
- 基于技术事实评估
- 考虑项目实际需求
- 评估各方案的优缺点
- 考虑实现成本和风险

### 2.3 给出仲裁结论
- **支持 plan-agent**：理由充分时明确支持
- **支持 analysis-agent**：理由充分时明确支持
- **折中方案**：两方都有道理时提出折中
- **需更多信息**：无法判断时明确标注

## 3) 第三方风险补充

从独立视角发现两方可能遗漏的：
- 技术风险
- 安全风险
- 性能风险
- 维护性风险
- 兼容性风险

## 4) 回写策略

- 把评估结论追加到 `Record/plan/draft-plan.md` 的"中立仲裁意见"章节
- 使用标准模板格式
- 明确标注最终建议和下一步
- **禁止修改两方已写入的内容**

## 5) 中立性检查清单

在输出前，检查：
- [ ] 是否基于技术事实而非立场判断？
- [ ] 是否同时考虑了两方的合理性？
- [ ] 是否有明确的仲裁结论？
- [ ] 是否写明了仲裁理由？
- [ ] 是否有建设性的下一步建议？
